#### javascript ####
function validateRegEx(regex, test_string) {
    if ( !(regex.test(test_string)) || test_string === "" )
    {
        return false;
    }
    return true;
}

function validateForm(form_name){

    if(form_name === 'order'){
        if(!validateName()){
            alert("Invalid name input.");
            return false;
        } else if(!validateEmail()){
            alert("Invalid email input.");
            return false;
        } else if(!validateAddress()){
            alert("Invalid address input.");
            return false;
        } else if(!validateZipcode()){
            alert("Invalid zipcode input.");
            return false;
        } else if(document.getElementById('creditcard').selected) {
            if (!validateCreditcardNumber()) {
                alert("Invalid credit card number.");
                return false;
            } else if (!validateCvcNumber()) {
                alert("Invalid cvc number.");
                return false;
            }
        }
    } else if(form_name === 'jobs'){
        if(!validateName()){
            alert("Invalid name input.");
            return false;
        } else if (!validateEmail()){
            alert("Invalid email input");
            return false;
        }
    }
    return true;
}

function validateName() {
    var first_name_string = document.getElementById('firstname').value;
    var last_name_string = document.getElementById('lastname').value;
    var name_regex = /^[A-Za-z\s]*$/;
    return (validateRegEx(name_regex, first_name_string) && validateRegEx(name_regex, last_name_string));
}

function validateEmail() {
    var email_string = document.getElementById('email').value;
    var email_regex = /^[a-zA-Z]{1}\w+(\.\w+[@]|[@]).*\.[a-z]{2,3}$/;

    return validateRegEx(email_regex, email_string);
}

function validateAddress(){
    var address = document.getElementById('streetaddress').value;
    var address_regex = /^\d{1,5}([\s\D]){1,}\s\d{1,5}$/;

    return validateRegEx(address_regex, address);
}

function validateZipcode() {
    var zip = document.getElementById('zipcode').value;
    var zip_regex = /^\d{6}$/;

    return validateRegEx(zip_regex, zip);
}

function validateCreditcardNumber(){
    var cc_number = document.getElementById('creditcard_number').value;
    var cc_number_regex = /^\d{16}$/;

    return validateRegEx(cc_number_regex, cc_number);
}

function validateCvcNumber(){
    var cvc_number = document.getElementById('cvc_number').value;
    var cvc_number_regex = /^\d{3}$/;

    return validateRegEx(cvc_number_regex, cvc_number);
}

function validateDate() {
    var date = document.getElementById('date').value;
    var today = new Date();

    if ( (date.getFullYear() < today.getFullYear())
        || (date.getFullYear() === today.getFullYear())
        && date.getMonth() < today.getMonth()
        || (date.getFullYear() === today.getFullYear())
        && date.getMonth() === today.getMonth()
        && date.getDay() <= today.getDay())
    {
        alert('Invalid date');
        return false;
    }
    return true;
}

/*
* To update the total price, we add or remove directly from the total price by looking at whether we increased
* the quantity of the product or decreased it.
*
* The alternative is to add all the sub-prices together every time we change the quantity of any item. This
* solution would not only require hard-coding each item in this function (less scalable) and would require a
* sub-price to be stored for each item (memory), it would also be less efficient in terms of computing power.
*
* Having a general "updatePrice"-solution also can be used by all the pages to update the price of the cart,
* not just the menu.
* */
function updatePrice(quantity_box_id, item_name, item_price) {
    // static map containing all selected items
    // key: item_name
    // value: {item_price, old_quantity}
    if( typeof items == 'undefined' ) {
        items = new Map();
    }

    // get the value of the quantity box
    var new_quantity = parseInt(document.getElementById('' + quantity_box_id).value);

    // this is to check what the quantity WAS (before the change).
    var old_quantity = (items.has(item_name) ? items.get(item_name)[1] : 0);

    // scalar depending on if we added or removed from the quantity
    var scalar = ((new_quantity > old_quantity) ?  1 : -1);

    // update the total price
    var current_total = document.getElementById('menu_total_price').innerHTML;
    var new_total = (parseFloat(current_total) + scalar * parseFloat(item_price)).toFixed(2);
    document.getElementById('menu_total_price').innerHTML = new_total;

    // update the map with the products quantity, or delete entry if quantity == 0.
    if (new_quantity !== 0) {
        items.set(item_name, [item_price, new_quantity]);
    }
    else {
        items.delete(item_name);
    }
}

/*
* compile_cart() changes the value of three hidden boxes in the html: one that contains all the names of the selected
* products, one for the quantity, and one for the prices. These values are then sent via GET method to php which
* displays a shopping cart.
*/
function compile_cart()
{
    if( typeof items == 'undefined' ) {
        items = new Map();
    }

    // if entry[0] is in document.getElementById('prod_names').value then
    //
    for (const entry of items.entries()) {
        document.getElementById('prod_names').value += entry[0] + ";";
        document.getElementById('prod_prices').value += entry[1][0] + " ";
        document.getElementById('prod_quants').value += entry[1][1] + ";";
    }

    // clear menu
    for (i = 1; i <= 10; ++i) {
        document.getElementById('numinput' + i).value = 0;
    }
}

function displayCreditcardInfo() {
    let cc_no = document.getElementById("creditcard_number");
    let cvc_no = document.getElementById("cvc_number");
    if(document.getElementById('creditcard').selected){
        document.getElementById("creditcard_number_label").innerHTML = "Creditcard number*";
        document.getElementById("cvc_number_label").innerHTML = "CVC number*";
        cc_no.type = "text";
        cvc_no.type = "text";
        cc_no.required = "1";
        cvc_no.required = "1";
    } else {
        document.getElementById("creditcard_number_label").innerHTML = "";
        document.getElementById("cvc_number_label").innerHTML = "";
        cc_no.type = "hidden";
        cvc_no.type = "hidden";
        cc_no.required = "0";
        cvc_no.required = "0";
    }
}

#### setup_session.php ####
<?php
session_start();
include "db_connect.php";
$sql = "SELECT product_id, product_price FROM f32ee.de_products";
if(!$result = mysqli_query($conn, $sql)) {
	echo "Something went wrong when fetching product info: " . mysqli_error($conn);
}
if(!isset($_SESSION["cart"])){
    $_SESSION['cart'] = array();
    for($i = 0; $i < $result->num_rows; $i++){
	    $row = $result->fetch_assoc();
	    array_push($_SESSION['cart'], 0);
	}
}
?>

#### get_menu_info.php ####
<?php
include "php/db_connect.php";
$sql = "SELECT product_name, product_description, product_price FROM f32ee.de_products";
if(!$result = mysqli_query($conn, $sql)) {
    echo "Something went wrong when fetching product info: " . mysqli_error($conn);
}
for($i = 1; $i <= $result->num_rows; $i++) {
    $row = $result->fetch_assoc();
	${'product_name_' . $i} = $row["product_name"];
	${'product_description_' . $i} = $row["product_description"];
	${'product_price_' . $i} = $row["product_price"];
}
$sql = "SELECT category_name, category_description FROM f32ee.de_category";
if(!$result = mysqli_query($conn, $sql)) {
	echo "Something went wrong when fetching category info: " . mysqli_error($conn);
}
for($i = 1; $i <= $result->num_rows; $i++) {
	$row = $result->fetch_assoc();
	${'category_name_' . $i} = $row["category_name"];
	${'category_description_' . $i} = $row["category_description"];
}
mysqli_close($conn);
?>

##### db_connect.php

<?php
	$conn = mysqli_connect("localhost", "f32ee", "f32ee", "f32ee");
	if (!$conn) {
		die("Connection failed: " . mysqli_connect_error());
	}

?>

#### confirm order

<?php
    include "setup_session.php";
?>
<!DOCTYPE html>
<html>
<head>
    <title>Order success</title>
	<link rel="stylesheet" href="../stylesheet.css">
	<script src="../javascript/script.js"></script>
</head>
<body>
    <div class="header_div">
        <a href="../index.php">
            <img src="../media/pics/header_pic.png" class="header_pic">
        </a>
            <div class="shopping_cart">
                <a href="../catalogue.php">
                    <span id="shopping_cart">
                        <div class="cart_image">
                            <?php
                                echo '0';
                            ?>
                        </div>
                    </span>
                </a>
            </div>
        <div class="navbar">
            <a href="../jobs.php">
                <div class="navbar_element">
                    Jobs
                </div>
            </a>
            <a href="../deals.php">
                <div class="navbar_element">
                    Deals of the Day
                </div>
            </a>
            <a href="../menu.php">
                <div class="navbar_element">
                    Menu
                </div>
            </a>
            <a href="../index.php">
                <div class="navbar_element">
                    Home
                </div>
            </a>
        </div>
    </div>
    <div class="wrapper">
        <?php
            include "db_connect.php";
            $to = 'f32ee@localhost';
            $email = $_POST['email'];
            $firstName = $_POST['firstname'];
            $lastName = $_POST['lastname'];
            $streetAddress = $_POST['streetaddress'];
            $zip = $_POST['zipcode'];
            $payment_method = $_POST['payment_method'];
            $subject = "Order confirmation";
            $headers = 'From: f32ee@localhost' . "\r\n" .
            'Reply-To: f32ee@localhost' . "\r\n" .
            'X-Mailer: PHP/' . phpversion();
            if($payment_method === 'creditcard'){
                $cc_number = $_POST['creditcard_number'];
            }

            do {
                $rand = rand();
            } while($rand === 0);
            $message = "Dear " . $firstName . " " . $lastName . ". Thank you for your order! <br> Your receipt number is $rand, please show this number to the delivery driver! <br><br>You ordered: <br><br>" ;
            $email_message = "Dear " . $firstName . " " . $lastName . ". Thank you for your order!\nYour receipt number is $rand, please show this number to the delivery driver!\n\nYou ordered:\n\n" ;
            $total = 0;
            $sql = "SELECT product_name, product_price FROM f32ee.de_products";
            if(!$result = mysqli_query($conn, $sql)){
                echo "Something went wrong when fetching data from database: " . mysqli_error($conn);
            }
            $sql = "INSERT INTO f32ee.de_orders (order_id, order_date) VALUES ($rand, CURDATE())";
            if(!$hejsan = mysqli_query($conn, $sql)){
                echo "Something went wrong when inserting data into order table: " . mysqli_error($conn);
            }
            for($i = 0; $i < count($_SESSION['cart']); $i++){
                 $row = mysqli_fetch_assoc($result);
                 if($_SESSION['cart'][$i] > 0){
                    $quan = $_SESSION['cart'][$i];
                    $message .= $_SESSION['cart'][$i] . "x " . $row['product_name'] . " for $" . ($_SESSION['cart'][$i] * $row['product_price']) . "<br>";
                    $email_message .= $_SESSION['cart'][$i] . "x " . $row['product_name'] . " for $" . ($_SESSION['cart'][$i] * $row['product_price']) . "\n";
                    $sql = "INSERT INTO f32ee.de_sales (receipt_no, product_id, quantity) VALUES ($rand, ($i + 1), $quan)";
                    if(!$hejsan = mysqli_query($conn, $sql)){
                        echo "Something went wrong when inserting data into database: " . mysqli_query($conn);
                    }
                    $_SESSION['cart'][$i] = 0; //Clears the cart.
                 }
             }
            $message .= "<br>The items will be delivered to:<br>" . $streetAddress . "<br>" . $zip . "<br>";
            $email_message .= "\nThe items will be delivered to:\n" . $streetAddress . "\n" . $zip . "\n\n";
            $message .= "<br>Your payment method was by " . $payment_method . ".";
            $email_message .= "Your payment method was by " . $payment_method . ".";
            if($payment_method === 'creditcard'){
                $message .= "<br>Credit card used: **** **** **** " . substr($cc_number, 12, 16) . "<br>";
                $email_message .= "\nCredit card used: **** **** **** " . substr($cc_number, 12, 16) . "\n";
            }
            $message .= "<br>Confirmation mail sent to " . $email . "<br>";
            echo '<span style="display:block;margin-top:30px;text-align:center;">' . $message . '</span>';
            mail($to, $subject,$email_message, $headers, '-ff32ee@localhost');
        ?>
    </div>
    <footer>
        <p>Copyright &copy; The Durian Company 2019. </p>
        <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
        <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
    </footer>
</body>
</html>

### confirm_jobapplication.php

<?php
    include "setup_session.php";
    include "db_connect.php";
?>
<!DOCTYPE html>
<html>
<head>
    <title>Application success</title>
	<link rel="stylesheet" href="../stylesheet.css">
	<script src="../javascript/script.js"></script>
</head>
<body>
    <div class="header_div">
        <a href="../index.php">
            <img src="../media/pics/header_pic.png" class="header_pic">
        </a>
            <div class="shopping_cart">
                <a href="../catalogue.php">
                    <span id="shopping_cart">
                        <div class="cart_image">
                            <?php
                                $total = 0;
                                for($i = 0; $i < count($_SESSION['cart']); $i++){
                                    if($_SESSION['cart'][$i] > 0){
                                         $total += $_SESSION['cart'][$i];
                                     }
                                }
                                echo $total;
                            ?>
                        </div>
                    </span>
                </a>
            </div>
        <div class="navbar">
            <a href="../jobs.php">
                <div class="navbar_element">
                    Jobs
                </div>
            </a>
            <a href="../deals.php">
                <div class="navbar_element">
                    Deals of the Day
                </div>
            </a>
            <a href="../menu.php">
                <div class="navbar_element">
                    Menu
                </div>
            </a>
            <a href="../index.php">
                <div class="navbar_element">
                    Home
                </div>
            </a>
        </div>
    </div>
    <div class="wrapper">
        <?php
            $to = 'f32ee@localhost';
            $headers = 'From: f32ee@localhost' . "\r\n" .
            'Reply-To: f32ee@localhost' . "\r\n" .
            'X-Mailer: PHP/' . phpversion();
            $firstName = $_POST['firstname'];
            $lastName = $_POST['lastname'];
            $position = $_POST['position'];
            $email = $_POST['email'];
            $experience = "n/a";
            if(strlen(trim($_POST['experience'])) > 0){
                $experience = $_POST['experience'];
            }
            $subject = "Job application";
            $message = "Dear " . $firstName . " " . $lastName . ". Thank you for your application! <br> You entered the following: <br><br>" ;
            $email_message = "Dear " . $firstName . " " . $lastName . ". Thank you for your application!\nYou entered the follow:\n\n";
            $message .= "<br>First name: " . $firstName . "<br>" . "Last name: " . $lastName . "<br>";
            $email_message .= "\nFirst name: " . $firstName . "\nLast name: " . $lastName . "\n";
            $sql = "SELECT position_name FROM f32ee.de_positions WHERE position_id=$position";
            if(!$result = mysqli_query($conn, $sql)){
                echo "Something went wrong when fetching position name from database: " . mysqli_error($conn);
            }
            $row = mysqli_fetch_assoc($result);
            $message .= "Applied for position: " . $row['position_name'] . "<br>";
            $email_message .= "Applied for position: " . $row['position_name'] . "\n";
            if(strlen($experience) > 0){
                $message .= "Experience: " . $experience . "<br>";
                $email_message .= "Experience: " . $experience . "\n";
            }
            do{
                $rand = rand();
            } while($rand === 0);
            $message .= "<br>You application id is: " . $rand . "<br>Please save your id!<br>";
            $email_message .= "\nYou application id is: " . $rand . "\nPlease save your id!\n";
            $sql = "INSERT INTO f32ee.de_applicants (application_id, applied_for, first_name, last_name, email, experience) VALUES ($rand, '$position', '$firstName', '$lastName', '$email', '$experience')";
            if(!$result = mysqli_query($conn, $sql)){
                echo "Something went wrong when inserting data to database: " . mysqli_error($conn);
            }
            $message .= "<br>Confirmation mail sent to " . $email;
            echo '<span style="display:block;margin-top:30px;text-align:center;">' . $message . '</span>';
            mail($to, $subject, $email_message, $headers, '-ff32ee@localhost');
        ?>
    </div>
    <footer>
        <p>Copyright &copy; The Durian Company 2019. </p>
        <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
        <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
    </footer>
</body>
</html>


### add_to_cart_menu.php

<?php
    include "db_connect.php";
	include "setup_session.php";
    $items = explode(";", $_GET['prod_names']);
    $prices = explode(" ", $_GET['prod_prices']);
    $quantities = explode(";", $_GET['prod_quants']);

    // remove duplicate items
    for ($i=0; $i<count($items)-1; $i++) {
        for ($k=$i+1; $k<count($items)-1; $k++) {
            if ($items[$i] == $items[$k]) {
               $quantities[$i] += $quantities[$k];
               \array_splice($items, $k, 1);
               \array_splice($prices, $k, 1);
               \array_splice($quantities, $k, 1);
            }
        }
    }
    $sql = "SELECT product_id, product_name FROM f32ee.de_products";
    if(!$result=mysqli_query($conn, $sql)){
        echo "Something went wrong when fetching data from database: " . mysqli_error($conn);
    }
    $found_items = 0;
    while($found_items < count($items)){
        if(($row = mysqli_fetch_assoc($result)) == NULL){
			$sql = "SELECT product_id, product_name FROM f32ee.de_products";
			if(!$result=mysqli_query($conn, $sql)){
				echo "Something went wrong when fetching data from database: " . mysqli_error($conn);
			}
		}
        if($row['product_name'] == $items[$found_items]){
            $index = (int)$row['product_id']-1;
            if($index >= 0){
                $_SESSION['cart'][$index] += (int)$quantities[$found_items];
                $found_items++;
            } else {
                $found_items++;
            }
        }
    }
   header("location:../menu.php");
?>

### add_to_cart_hp_dots

<?php
    include "setup_session.php";
    if(isset($_GET['pizza_homepage'])){
        $_SESSION['cart'][0]++;
        header("location:../index.php");
    }elseif(isset($_GET['drink_homepage'])){
        $_SESSION['cart'][6]++;
        header("location:../index.php#drink_homepage");
    }elseif(isset($_GET['dessert_homepage'])){
        $_SESSION['cart'][11]++;
        header("location:../index.php#dessert_homepage");
    }elseif(isset($_GET['pizza_dotd'])){
        $_SESSION['cart'][2]++;
        header("location:../deals.php");
    }elseif(isset($_GET['drink_dotd'])){
        $_SESSION['cart'][8]++;
        header("location:../deals.php");
    }elseif(isset($_GET['dessert_dotd'])){
        $_SESSION['cart'][10]++;
        header("location:../deals.php");
    }
?>

### setub_db.sql

-- Category 1: Pizza; Category 2: Salad; Category 3: Drinks; Category 4: Desserts;
-- source C:\Users\lukpo\Dropbox\Project\ee4717\project\sql\setupdb.sql

CREATE DATABASE IF NOT EXISTS f32ee;
use f32ee;

CREATE TABLE IF NOT EXISTS de_category (
category_id INT UNSIGNED PRIMARY KEY,
category_name VARCHAR(30),
category_description VARCHAR(500)
);

CREATE TABLE IF NOT EXISTS de_products (
product_id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
product_name VARCHAR(30) NOT NULL,
product_price DOUBLE NOT NULL,
product_category INT UNSIGNED,
product_description VARCHAR(500),
CONSTRAINT FOREIGN KEY(product_category) REFERENCES de_category(category_id)
);

CREATE TABLE IF NOT EXISTS de_sales (
product_id INT UNSIGNED,
quantity INT UNSIGNED,
CONSTRAINT FOREIGN KEY fk_sales(product_id) REFERENCES de_products(product_id)
);

CREATE TABLE IF NOT EXISTS de_positions (
position_id INT PRIMARY KEY,
position_name VARCHAR(40),
position_salary INT
);

CREATE TABLE IF NOT EXISTS de_employees (
ssn BIGINT PRIMARY KEY,
first_name VARCHAR(40),
last_name VARCHAR(40),
pos INT,
CONSTRAINT FOREIGN KEY fk_employee(pos) REFERENCES de_positions(position_id)
);

CREATE TABLE IF NOT EXISTS de_applicants (
application_id INT PRIMARY KEY,
applied_for INT,
first_name VARCHAR(40),
last_name VARCHAR(40),
email VARCHAR(40),
CONSTRAINT FOREIGN KEY fk_applicant(applied_for) REFERENCES de_positions(position_id)
);

INSERT INTO f32ee.de_category (category_id, category_name, category_description) VALUES (1, "Pizza", "All pizzas include durian, mozzarella, and tomato sauce.");
INSERT INTO f32ee.de_category (category_id, category_name, category_description) VALUES (2, "Salad", "All salads include durian, iceberg lettuce, tomatoes, and cucumber.");
INSERT INTO f32ee.de_category (category_id, category_name, category_description) VALUES (3, "Drink", "All drinks include durian and ice as standard.");
INSERT INTO f32ee.de_category (category_id, category_name, category_description) VALUES (4, "Dessert", "All desserts include durian as standard.");

INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "The Original", 12.95, "Ham", 1);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Tutti Frutti", 15.95, "Mango, Pineapple, Banana, Curry powder", 1);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Meatzza", 21.95, "Ham, Pepperoni, Bacon, Chicken", 1);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Durian Overload", 23.95, "Extra Durian, Extra Cheese", 1);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Peanut pizza", 14.95, "Peanuts, Banana", 1);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Greek Salad", 9.95, "Feta cheese, Olives, Red bellpepper", 2);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Mango Juice", 4.95, "Mango/Durian Juice", 3);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Watermelon Juice", 2.95, "Watermelon/Durian Juice", 3);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Hot mess", 1.95, "Warm durian drink", 3);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Chocolate Milkshake", 3.95, "Chocolate/Durian milkshake", 4);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Lemon Pudding", 4.95, "Lemon/Durian pudding",  4);
INSERT INTO f32ee.de_products (product_id, product_name, product_price, product_description, product_category) VALUES (NULL, "Durian Pancake", 5.95, "Served with Durian Jam",4);
INSERT INTO f32ee.de_positions (position_id, position_name, position_salary) VALUES (1, "Cook", 1000);
INSERT INTO f32ee.de_positions (position_id, position_name, position_salary) VALUES (2, "Manager", 1500);
INSERT INTO f32ee.de_positions (position_id, position_name, position_salary) VALUES (3, "Delivery Driver", 750);

INSERT INTO f32ee.de_employees (ssn, first_name, last_name, pos) VALUES (9212281234, "Luigi", "Marinho", 1);
INSERT INTO f32ee.de_employees (ssn, first_name, last_name, pos) VALUES (1234567890, "Spider", "Man", 3);
INSERT INTO f32ee.de_employees (ssn, first_name, last_name, pos) VALUES (1337420690, "Mister", "BigBoss", 2);

#### cart.php

<?php
    include "php/setup_session.php";
	
    if (isset($_GET['empty'])) {
        unset($_SESSION['cart']);
        header('location: ' . $_SERVER['PHP_SELF']);
        exit();
    }

?>
<!DOCTYPE html>
<html>
<head>
    <title>Product catalog</title>
	<link rel="stylesheet" href="stylesheet.css">
	<script src="javascript/script.js"></script>
</head>
<body>
    <div class="header_div">
        <a href="index.php">
            <img src="media/pics/header_pic.png" class="header_pic">
        </a>
            <div class="shopping_cart">
                <a href="catalogue.php">
                    <span id="shopping_cart">
                        <div class="cart_image">
                            <?php
                                $total = 0;
                                for($i = 0; $i < count($_SESSION['cart']); $i++){
                                    if($_SESSION['cart'][$i] > 0){
                                         $total += $_SESSION['cart'][$i];
                                     }
                                }
                                echo $total;
                            ?>
                        </div>
                    </span>
                </a>
            </div>
        <div class="navbar">
            <a href="jobs.php">
                <div class="navbar_element">
                    Jobs
                </div>
            </a>
            <a href="deals.php">
                <div class="navbar_element">
                    Deals of the Day
                </div>
            </a>
            <a href="menu.php">
                <div class="navbar_element">
                    Menu
                </div>
            </a>
            <a href="index.php">
                <div class="navbar_element">
                    Home
                </div>
            </a>
        </div>
    </div>
    <div class="wrapper">
        <p class="centeredparagraph"><?php
            $total = 0;
            echo '<span class="cc_cart_items">';
            for($i = 0; $i < count($_SESSION['cart']); $i++){
                $total += $_SESSION['cart'][$i];
             }
             if($total == 1){
                echo "Your shopping cart contains " . $total . " item.";
             } elseif($total > 1){
                echo "Your shopping cart contains " . $total . " items.";
             } else {
                echo '<span style="color:#FFFF00;font-size:30px;">Your shopping cart is empty.</span>';
                displayEmpty();
                return;
             }
             echo '</span>';
        ?></p>
        <div class="cc_menu_wrapper">
            <table class="cc_table">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                    </tr>
                </thead>

                <tbody>
                    <?php
                        $total = 0;
                        $sql = "SELECT product_name, product_price FROM f32ee.de_products";
                        if(!$result = mysqli_query($conn, $sql)){
                            echo "Something went wrong when fetching data from database: " . mysqli_error($conn);
                        }
                        for($i = 0; $i < count($_SESSION['cart']); $i++){
                             $row = mysqli_fetch_assoc($result);
                             if($_SESSION['cart'][$i] > 0){
                                echo "<tr>";
                                echo "<td align='center'>" .$row['product_name']. "</td>";
                                echo "<td align='center'>" .$_SESSION['cart'][$i]. "</td>";
                                echo "<td align='center'>$" .$row['product_price']. "</td>";
                                echo "</tr>";
                                $total = $total + (double)$row['product_price'] * (int)$_SESSION['cart'][$i];
                             }
                         }
                        echo "<tr>";
                        echo "<td colspan=2 align='left' style='padding-left:35px;font-size:20px; font-weight:bold;'>Total price</td>";
                        echo "<td align='center' style='font-size:20px; font-weight:bold;'>$" . number_format($total, 2) . "</td>";
                        echo "</tr>";
                    ?>
                </tbody>
            </table>
            <p class="centeredparagraph"><a href="index.php" class="cc_links" style="margin-right:14%;">Continue shopping</a>
            <a href="<?php echo $_SERVER['PHP_SELF']; ?>?empty=1" class="cc_links">Empty your cart</a></p>
        </div>
            <div class="application_wrapper">
                <h2 class="centeredheader">
                    Place order
                </h2>
                <p class="centeredparagraph">
                    Please fill in the fields below. All fields with an asterisk* are required.<br>
                    You will get a confirmation e-mail once we receive the order!
                </p>
                <form method="post" action="php/confirm_order.php" onsubmit="return validateForm('order');">
                    <label for="firstname" class="label_jobapplication">First name*</label><input class="input_jobapplication" name="firstname" id="firstname" type="text" placeholder="First name" required><br>
                    <label for="lastname" class="label_jobapplication">Last name*</label><input class="input_jobapplication" name="lastname" id="lastname" type="text" placeholder="Last name" required><br>
                    <label for="email" class="label_jobapplication">E-mail*</label><input class="input_jobapplication" name="email" id="email" type="email" placeholder="E-mail address" required><br>
                    <label for="streetaddress" class="label_jobapplication">Street address*</label><input class="input_jobapplication" name="streetaddress" id="streetaddress" type="text" placeholder="Street address" required><br>
                    <label for="zipcode" class="label_jobapplication">Zip code*</label><input class="input_jobapplication" name="zipcode" id="zipcode" type="text" placeholder="Zip code" required><br>
                    <label for="additional_info" class="label_jobapplication">Additional info</label><textarea class="input_jobapplication" id="additional_info" rows="4" cols="40" placeholder="Additional info to driver"></textarea><br>
                    <label for="payment" class="label_jobapplication">Payment*</label>
                    <select class="input_jobapplication" name='payment_method' required onchange="displayCreditcardInfo()">
                        <option selected disabled>Choose here</option>
                        <option value="cash">Cash</option>
                        <option id="creditcard" value='creditcard'>Credit card</option>
                        <option value="invoice">Invoice</option>
                    </select><br>
                    <label for="creditcard_number" class="label_jobapplication" id="creditcard_number_label"></label>
                        <input class="input_jobapplication" name="creditcard_number" id="creditcard_number" placeholder="Creditcard number" type="hidden"><br>
                    <label for="cvc_number" class="label_jobapplication" id="cvc_number_label"></label>
                        <input class="input_jobapplication" id="cvc_number" placeholder="CVC" type="hidden"><br>
                    <br><br>
                    <input class="submit_jobapplication" type="submit" value="Confirm order">
                </form>
            </div>
        </div>
    </div>
    <footer>
        <p>Copyright &copy; The Durian Company 2019. </p>
        <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
        <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
    </footer>
</body>
</html>

<?php
    function displayEmpty(){
        echo '<p class="centeredparagraph"><a href="index.php" class="cc_empty_links">Continue shopping</a>';
        echo '<footer>
            <p>Copyright &copy; The Durian Company 2019. </p>
            <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
            <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
        </footer>';
    }
?>

### catalog.php
<?php
    include "php/db_connect.php";
    include "php/setup_session.php";
    if (isset($_GET['empty'])) {
    	unset($_SESSION['cart']);
    	header('location: ' . $_SERVER['PHP_SELF']);
    	exit();
    }
    if(isset($_GET['plus'])){
		$_SESSION['cart'][$_GET['plus']]++;
    }
    if(isset($_GET['minus'])){
     		$_SESSION['cart'][$_GET['minus']]--;
     }
?>

<!DOCTYPE html>
<html>
<head>
    <title>Product catalog</title>
	<link rel="stylesheet" href="stylesheet.css">
</head>
<body>
    <div class="header_div">
        <a href="index.php">
            <img src="media/pics/header_pic.png" class="header_pic">
        </a>
            <div class="shopping_cart">
                <a href="catalogue.php">
                    <span id="shopping_cart">
                        <div class="cart_image">
                            <?php
                                $total = 0;
                                for($i = 0; $i < count($_SESSION['cart']); $i++){
                                    if($_SESSION['cart'][$i] > 0){
                                         $total += $_SESSION['cart'][$i];
                                     }
                                }
                                echo $total;
                            ?>
                        </div>
                    </span>
                </a>
            </div>
        <div class="navbar">
            <a href="jobs.php">
                <div class="navbar_element">
                    Jobs
                </div>
            </a>
            <a href="deals.php">
                <div class="navbar_element">
                    Deals of the Day
                </div>
            </a>
            <a href="menu.php">
                <div class="navbar_element">
                    Menu
                </div>
            </a>
            <a href="index.php">
                <div class="navbar_element">
                    Home
                </div>
            </a>
        </div>
    </div>
    <div class="wrapper">
        <p class="centeredparagraph">
            <?php
            $total = 0;
                echo '<span class="cc_cart_items">';
                    for($i = 0; $i < count($_SESSION['cart']); $i++){
                        $total += $_SESSION['cart'][$i];
                     }
                     if($total == 1){
                        echo 'Your shopping cart contains ' . $total . " item.";
                     } elseif($total > 1){
                        echo 'Your shopping cart contains ' . $total . " items.";
                     } else {
                        echo 'Your shopping cart is empty.';
                        displayEmpty();
                        return;
                     }
                 echo '</span>';
            ?>
        </p>
        <div class="cc_menu_wrapper">
            <table class="cc_table">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                    </tr>
                </thead>

                <tbody>
                    <?php
                        $total = 0;
                        $sql = "SELECT product_name, product_price FROM f32ee.de_products";
                        if(!$result = mysqli_query($conn, $sql)){
                            echo "Something went wrong when fetching data from database: " . mysqli_error($conn);
                        }
                        for($i = 0; $i < count($_SESSION['cart']); $i++){
                             $row = mysqli_fetch_assoc($result);
                             if($_SESSION['cart'][$i] > 0){
                                echo "<tr>";
                                echo "<td align='center'>" .$row['product_name']. "</td>";
                                echo '<td align="center"><a href="'. "?minus=" .$i. '"><img src="media/pics/minus_symbol.png" class="cc_minus"></a>';
                                echo $_SESSION["cart"][$i];
                                echo '<a href="'. "?plus=" .$i. '"><img src="media/pics/plus_symbol.png" class="cc_plus"></a>';
                                echo "<td align='center'>$" .$row['product_price']. "</td>";
                                echo "</tr>";
                                $total = $total + (double)$row['product_price'] * (int)$_SESSION['cart'][$i];
                             }
                         }
                        echo "<tr>";
                        echo "<td colspan=2 align='left' style='padding-left:35px;font-size:20px; font-weight:bold;'>Total price </td>";
                        echo "<td align='center' style='font-size:20px;font-weight:bold;'>$" . number_format($total, 2) . "</td>";
                        echo "</tr>";
                    ?>
                </tbody>
            </table>
            <p class="centeredparagraph"><a href="cart.php" class="cc_links" style="margin-right:13%;">Continue to checkout</a>
            <a href="<?php echo $_SERVER['PHP_SELF']; ?>?empty=1" class="cc_links">Empty your cart</a></p>
        </div>
    </div>
    <footer>
        <p>Copyright &copy; The Durian Company 2019. </p>
        <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
        <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
    </footer>
</body>
</html>
<?php
    function displayEmpty(){
        echo '<p class="centeredparagraph"><a href="index.php" class="cc_empty_links">Continue shopping</a>';
        echo '<footer>
            <p>Copyright &copy; The Durian Company 2019. </p>
            <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
            <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
        </footer>';
    }
?>

## deal.php

<?php
include "php/setup_session.php";
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Durian Experience - Deals</title>
    <link rel="stylesheet" href="stylesheet.css">
    <style>
        .background_para {
            background-color:rgba(0,0,0,0.5);
            color:white;
        }
    </style>
</head>
<body>
<div class="header_div">
    <a href="index.php">
        <img src="media/pics/header_pic.png" class="header_pic">
    </a>
        <div class="shopping_cart">
            <a href="catalogue.php">
                <span id="shopping_cart">
                    <div class="cart_image">
                        <?php
                            $total = 0;
                            for($i = 0; $i < count($_SESSION['cart']); $i++){
                                if($_SESSION['cart'][$i] > 0){
                                     $total += $_SESSION['cart'][$i];
                                 }
                            }
                            echo $total;
                        ?>
                    </div>
                </span>
            </a>
        </div>
    <div class="navbar">
        <a href="jobs.php">
            <div class="navbar_element">
                Jobs
            </div>
        </a>
        <a href="deals.php">
            <div class="active_element">
                Deals of the Day
            </div>
        </a>
        <a href="menu.php">
            <div class="navbar_element">
                Menu
            </div>
        </a>
        <a href="index.php">
            <div class="navbar_element">
                Home
            </div>
        </a>
    </div>
</div>
    <div class="wrapper">
        <h2 class="centeredheader">
            Deals of the day
        </h2>
        <p class="centeredparagraph">
            These are the products of the day, place an order now for an extra low price!
        </p>
        <form method="get" action="php/add_to_cart_hp_dotd.php">
            <div class="dealwrapper">
                <img src="media/pics/durian_pizza5.jpg" class="dealimage">
                <p>
                    The Meatzza is topped with all the meats we have to offer; perfect for a meat lover! Just $21.95!
                </p>
                <label><input type="submit" value="Add to cart" name="pizza_dotd"></label>
            </div>
            <div class="dealwrapper">
                <img src="media/pics/durian_drink1.jpg" class="dealimage">
                <p>
                    You should really try the Hot Mess, our own Durian Tea. Now for the special price of $1.95!
                </p>
                <label><input type="submit" value="Add to cart" name="drink_dotd"></label>
            </div>
            <div class="dealwrapper">
                <img src="media/pics/durian_dessert4.jpg" class="dealimage">
                <p>
                    Our Lemon/Durian pudding is a real treat. For only $4.95, its sweet and sour goodness will stick with you for days!
                </p>
                <label><input type="submit" value="Add to cart" name="dessert_dotd"></label>
            </div>
        </form>
    </div>
    <footer>
        <p>Copyright &copy; The Durian Company 2019. </p>
        <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
        <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
    </footer>
</body>
</html>

## index.php

<?php
include "php/setup_session.php";
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Durian Experience - Home</title>
    <link rel="stylesheet" href="stylesheet.css">
    <script src="javascript/script.js"></script>
</head>
<body>
<div class="header_div">
    <a href="index.php">
        <img src="media/pics/header_pic.png" class="header_pic">
    </a>
        <div class="shopping_cart">
            <a href="catalogue.php">
                <span id="shopping_cart">
                    <div class="cart_image">
                        <?php
                            $total = 0;
                            for($i = 0; $i < count($_SESSION['cart']); $i++){
                                if($_SESSION['cart'][$i] > 0){
                                     $total += $_SESSION['cart'][$i];
                                 }
                            }
                            echo $total;
                        ?>
                    </div>
                </span>
            </a>
        </div>
    <div class="navbar">
        <a href="jobs.php">
            <div class="navbar_element">
                Jobs
            </div>
        </a>
        <a href="deals.php">
            <div class="navbar_element">
                Deals of the Day
            </div>
        </a>
        <a href="menu.php">
            <div class="navbar_element">
                Menu
            </div>
        </a>
        <a href="index.php">
            <div class="active_element">
                Home
            </div>
        </a>
    </div>
</div>
    <div class="wrapper">
        <div class="pic">
            <img src="media/pics/durian_pizza3.jpg" class="pic_left">
            <div class="para_right_box">
                <h2>
                    Durian Pizza
                </h2>
                <p>
                    Enjoy the unique taste of our signature dish: The Original. By combining Durian and Pizza, the two best things in the world, we can guarantee that you will
                    love this dish. If you dont love it, you get your money back, and a lifetime supply of Durian to your doorstep! Its a win-win situation!<br>
                    Order now for $12.95!
                </p>
                <form method="get" action="php/add_to_cart_hp_dotd.php">
                    <label><input type=submit value="Add to cart" name="pizza_homepage"></label>
                </form>
            </div>
        </div>
        <div class="pic" id="drink_homepage">
            <img src="media/pics/durian_drink2.png" class="pic_right">
            <div class="para_left_box">
                <h2>Durian Drink</h2>
                <p>Introducing the Mango/Durian juice. With a unique blend of Mango and Durian,
                    we are proud to present the best juice in the world!
                    Get yours today for the low price of $2.95, while stocks last!
                </p>
                <form method="get" action="php/add_to_cart_hp_dotd.php" style="float:left;clear:left;">
                    <label><input type=submit value="Add to cart" name="drink_homepage"></label>
                </form>
            </div>
        </div>
        <div class="pic" id="dessert_homepage">
            <img src="media/pics/durian_dessert1.jpg" class="pic_left">
            <div class="para_right_box">
                <h2>Durian Dessert</h2>
                <p>A Durian pancake is the best way to finish a meal. With loving hands, our expert chefs mix the pancake batter into a smooth blend. After frying the
                pancakes for a minute, they flip the pancake and add the Durian jam, allowing the jam to get luke-warm before serving.<br>
                Order yours now for just $5.95.
                </p>
                <form method="get" action="php/add_to_cart_hp_dotd.php">
                    <label><input type="submit" value="Add to cart" name="dessert_homepage"></label>
                </form>
            </div>
        </div>
    </div>
    <footer>
        <p>Copyright &copy; The Durian Company 2019. </p>
        <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
        <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
    </footer>
</body>
</html>

## jobapplication.php
<?php
	include "php/setup_session.php";
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Durian Experience - Jobs</title>
    <link rel="stylesheet" href="stylesheet.css">
    <script src="javascript/script.js"></script>
</head>
<body>
    <div class="header_div">
        <a href="index.php">
            <img src="media/pics/header_pic.png" class="header_pic">
        </a>
            <div class="shopping_cart">
                <a href="catalogue.php">
                    <span id="shopping_cart">
                        <div class="cart_image">
                            <?php
                                $total = 0;
                                for($i = 0; $i < count($_SESSION['cart']); $i++){
                                    if($_SESSION['cart'][$i] > 0){
                                         $total += $_SESSION['cart'][$i];
                                     }
                                }
                                echo $total;
                            ?>
                        </div>
                    </span>
                </a>
            </div>
        <div class="navbar">
            <a href="jobs.php">
                <div class="navbar_element">
                    Jobs
                </div>
            </a>
            <a href="deals.php">
                <div class="navbar_element">
                    Deals of the Day
                </div>
            </a>
            <a href="menu.php">
                <div class="navbar_element">
                    Menu
                </div>
            </a>
            <a href="index.php">
                <div class="navbar_element">
                    Home
                </div>
            </a>
        </div>
    </div>
    <div class="wrapper">
        <div class="application_wrapper">
            <h2 class="centeredheader">
                Application for
                <?php
                    if(isset($_POST['cook'])){
                        echo "cook";
                        $position = 1;
                    }
                    elseif(isset($_POST['manager'])){
                        echo "manager.";
                        $position = 2;
                    }
                    elseif(isset($_POST['driver'])){
                        echo "delivery driver.";
                        $position = 3;
                    }
                ?>
            </h2>
            <p class="centeredparagraph">
                Please fill in the fields below. All fields with an asterisk* are required.  We will reply as soon as possible!<br>
                You will get a confirmation e-mail once we receive the application!
            </p>
            <form method="post" action="php/confirm_jobapplication.php" onsubmit="return validateForm('jobs');">
                <label for="firstname" class="label_jobapplication">First name*</label><input class="input_jobapplication" name="firstname" id="firstname" type="text" placeholder="First name" required><br>
                <label for="lastname" class="label_jobapplication">Last name*</label><input class="input_jobapplication" name="lastname" id="lastname" type="text" placeholder="Last name" required><br>
                <label for="email" class="label_jobapplication">E-mail*</label><input class="input_jobapplication" name="email" id="email" type="email" placeholder="E-mail address" required><br>
                <label for="experience" class="label_jobapplication">Experience</label><textarea class="input_jobapplication" name="experience" id="experience" rows="4" cols="40" placeholder="Experience"></textarea><br>
                <input type="hidden" name="position" value="<?php echo $position; ?>"<br>
                <input class="submit_jobapplication" type="submit" value="Send application">
            </form>
        </div>
    </div>
    <footer>
        <p>Copyright &copy; The Durian Company 2019. </p>
        <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
        <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
    </footer>
</body>
</html>

## jobs.php
<?php 
	include "php/setup_session.php";
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Durian Experience - Jobs</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
    <div class="header_div">
        <a href="index.php">
            <img src="media/pics/header_pic.png" class="header_pic">
        </a>
            <div class="shopping_cart">
                <a href="catalogue.php">
                    <span id="shopping_cart">
                        <div class="cart_image">
                            <?php
                                $total = 0;
                                for($i = 0; $i < count($_SESSION['cart']); $i++){
                                    if($_SESSION['cart'][$i] > 0){
                                         $total += $_SESSION['cart'][$i];
                                     }
                                }
                                echo $total;
                            ?>
                        </div>
                    </span>
                </a>
            </div>
        <div class="navbar">
            <a href="jobs.php">
                <div class="active_element">
                    Jobs
                </div>
            </a>
            <a href="deals.php">
                <div class="navbar_element">
                    Deals of the Day
                </div>
            </a>
            <a href="menu.php">
                <div class="navbar_element">
                    Menu
                </div>
            </a>
            <a href="index.php">
                <div class="navbar_element">
                    Home
                </div>
            </a>
        </div>
    </div>
    <div class="wrapper">
        <h2 class="centeredheader">
            Open job offers
        </h2>
        <div class="jobwrapper">
            <div class="jobimage">
                <img src="media/pics/pizza-maker.png" style="width:100%;height:100%;">
            </div>
            <div class="jobtext">
                We need an experienced baker to help us cope with ever-increasing demands!<br>
                Are you who we are looking for? Apply now!
            </div>
            <div class="jobapplication">
                <form method="POST" action="jobapplication.php">
                    <input class="jobsubmit" type="submit" name="cook" value="Apply now">
                </form>
            </div>
        </div>
        <div class="jobwrapper">
            <div class="jobimage">
                <img src="media/pics/delivery-guy.png" style="width:100%;height:100%;">
            </div>
            <div class="jobtext">
                No drivers license required, we will handle the fines! Just show up and start delivering!<br>
                Sound interesting? Apply now!
            </div>
            <div class="jobapplication">
                <form method="POST" action="jobapplication.php">
                    <input class="jobsubmit" type="submit" name="driver" value="Apply now">
                </form>
            </div>
        </div>
    </div>
    <footer>
        <p>Copyright &copy; The Durian Company 2019. </p>
        <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
        <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
    </footer>
</body>
</html>

## menu.php
<?php
    include "php/get_menu_info.php";
	include "php/setup_session.php";
	include "php/db_connect.php";
    if(isset($_GET['plus'])){
        $_SESSION['cart'][$_GET['plus']]++;
    }
?>
<head>
    <meta charset="UTF-8">
    <title>The Durian Experience - Menu</title>
    <link rel="stylesheet" href="stylesheet.css">
    <script src="javascript/script.js"></script>
</head>
<body>
    <div class="header_div">
        <a href="index.php">
            <img src="media/pics/header_pic.png" class="header_pic">
        </a>
            <div class="shopping_cart">
                <a href="catalogue.php">
                    <span id="shopping_cart">
                        <div class="cart_image">
                            <?php
                                $total = 0;
                                for($i = 0; $i < count($_SESSION['cart']); $i++){
                                    if($_SESSION['cart'][$i] > 0){
                                         $total += $_SESSION['cart'][$i];
                                     }
                                }
                                echo $total;
                            ?>
                        </div>
                    </span>
                </a>
            </div>
        <div class="navbar">
            <a href="jobs.php">
                <div class="navbar_element">
                    Jobs
                </div>
            </a>
            <a href="deals.php">
                <div class="navbar_element">
                    Deals of the Day
                </div>
            </a>
            <a href="menu.php">
                <div class="active_element">
                    Menu
                </div>
            </a>
            <a href="index.php">
                <div class="navbar_element">
                    Home
                </div>
            </a>
        </div>
    </div>
    <div class="wrapper">
        <img src="media/pics/durian_pizza4.png" class="menu_image">
            <div class="menuwrapper">
                <table class="menutable">
                    <?php
                        $sql = "SELECT product_name, product_description, product_price, product_allergen FROM f32ee.de_products";
                        if(!$menu_result = mysqli_query($conn, $sql)){
                            echo "Something went wrong when fetching data from product table: " . mysqli_error($conn);
                        }
                        $sql = "SELECT category_name, category_description FROM f32ee.de_category";
                        if(!$category_result = mysqli_query($conn, $sql)){
                            echo "Something went wrong when fetching data from product table: " . mysqli_error($conn);
                        }
                        $total = 0;
                        for($i = 1; $i <= $menu_result -> num_rows; $i++){
                            $menu_row = mysqli_fetch_assoc($menu_result);
                            if($i === 1 || $i === 6 || $i === 7 || $i === 10){
                                $category_row = mysqli_fetch_assoc($category_result);
                                echo '<tr><th colspan="4" class="category_header">' . $category_row['category_name'] . '</th></tr>';
                                echo '<tr><td colspan="4" class="category_description">' . $category_row['category_description'] . '</td></tr>';
                            }
                            $numinput = "numinput" . $i;
                            echo '<tr><th>' . $menu_row['product_name'] . '</th><td>' . $menu_row['product_description'] . '<td>$' . '<span id=' . 'product_' . $i . '>' . $menu_row['product_price'] . '</span></td>';
                            echo '<td style="width:80px;"><a href="'. "?plus=" . ($i-1) . '"><img src="media/pics/add_to_cart.png" class="menu_addtocart"></a></td>';
                            ?>
                            <td style="width:20px;height:20px;padding-left:10px;">
                                <div class="allergen_wrapper">
                                    <img src="media/pics/info_symbol.png" class="menu_info_symbol">
                                    <div class="allergen_info">
                                        Allergens<?php echo ": " . $menu_row['product_allergen']; ?>
                                    </div>
                                </div>
                            </td>
                            <?php
                            $total = $total + (double)$menu_row['product_price'] * (int)$_SESSION['cart'][$i-1];
                        }
                        echo "<tr>";
                        echo "<th><b>Total price</b></td>";
                        echo "<td>$" . number_format($total, 2) . "</td>";
                        echo "</tr>";
                    ?>
                </table>
            </div>
            <img src="media/pics/durian_salad1.jpg" class="menu_image">
        </div>
    </div>
    <footer>
        <p>Copyright &copy; The Durian Company 2019. </p>
        <p>Hiranandani Gardens, Mumbai, Maharashtra 400076, India </p>
        <p><a href="mailto:durianMcD@durian.dur">durian_experience@email.com</a></p>
    </footer>
</body>




